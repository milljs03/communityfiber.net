<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support | Community Fiber</title>
    
    <!-- UPDATED CSP -->
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' https://www.gstatic.com https://maps.googleapis.com https://apis.google.com https://www.googletagmanager.com; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
                   font-src https://fonts.gstatic.com https://cdnjs.cloudflare.com; 
                   img-src 'self' data: https://maps.gstatic.com https://lh3.googleusercontent.com; 
                   frame-src https://accounts.google.com/ https://content-firebaseappcheck.googleapis.com;
                   connect-src 'self' https://firestore.googleapis.com https://www.googleapis.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://firebaseinstallations.googleapis.com https://firebase.googleapis.com https://www.google-analytics.com;">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/global.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/support.css">
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html" class="logo-container">
            <img src="assets/images/community-fiber-logo.png" alt="Community Fiber" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <span class="logo-text" style="display:none;">Community Fiber</span>
        </a>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="residential.html">Residential</a></li>
            <li><a href="business.html" class="active">Business</a></li>
            <li><a href="builders.html">Builders</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="support.html">Support</a></li>
            <li><a href="speedtest.html">Speed Test</a></li>
        </ul>
        <div class="mobile-menu-btn">â˜°</div>
    </nav>

    <!-- Modern Header -->
    <header class="support-hero">
        <div class="container hero-content">
            <h1>Help Center</h1>
            <p>We're here to help. Select a topic below to get started.</p>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            
            <!-- Topic Selection -->
            <section class="topics-section fade-in-section">
                <h2 class="section-label">What can we help you with?</h2>
                <div class="topic-grid">
                    <button class="topic-card" type="button" data-topic="billing">
                        <div class="icon-wrapper"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                        <span class="topic-title">Billing & Payments</span>
                    </button>
                    
                    <button class="topic-card" type="button" data-topic="service">
                        <div class="icon-wrapper"><i class="fa-solid fa-wifi"></i></div>
                        <span class="topic-title">Tech Support</span>
                    </button>

                    <button class="topic-card" type="button" data-topic="outage">
                        <div class="icon-wrapper"><i class="fa-solid fa-bolt"></i></div>
                        <span class="topic-title">Report Outage</span>
                    </button>

                    <button class="topic-card" type="button" data-topic="availability">
                        <div class="icon-wrapper"><i class="fa-solid fa-map-location-dot"></i></div>
                        <span class="topic-title">Check Availability</span>
                    </button>

                    <button class="topic-card" type="button" data-topic="general">
                        <div class="icon-wrapper"><i class="fa-regular fa-comment-dots"></i></div>
                        <span class="topic-title">General Inquiry</span>
                    </button>
                </div>
            </section>

            <!-- Dynamic Support Form -->
            <section id="form-section" class="form-section hidden">
                <div class="form-container">
                    <div class="form-header">
                        <h2 id="form-title">Submit Request</h2>
                        <p>Please fill out the details below so we can assist you.</p>
                    </div>
                    
                    <form id="support-form">
                        <input type="hidden" id="topic-input" name="topic">

                        <!-- Contact Info -->
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" required placeholder="e.g. Jane Doe">
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" required placeholder="e.g. jane@example.com">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" required placeholder="e.g. (555) 123-4567">
                        </div>

                        <!-- Dynamic Fields -->
                        <div id="field-billing" class="dynamic-field hidden">
                            <div class="form-group">
                                <label>Account Number (Optional)</label>
                                <input type="text" id="account-number" placeholder="Found on your bill header">
                            </div>
                        </div>

                        <div id="field-address" class="dynamic-field hidden">
                            <div class="form-group">
                                <label>Service Address</label>
                                <input type="text" id="address" placeholder="e.g. 123 Main St, Springfield">
                            </div>
                        </div>

                        <div id="field-service-type" class="dynamic-field hidden">
                            <div class="form-group">
                                <label>What seems to be the issue?</label>
                                <div class="select-wrapper">
                                    <select id="issue-type">
                                        <option value="" disabled selected>Select an issue...</option>
                                        <option value="slow">Slow Internet Speed</option>
                                        <option value="disconnect">Frequent Disconnections</option>
                                        <option value="equipment">Router/Modem Problems</option>
                                        <option value="other">Other Technical Issue</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Message -->
                        <div class="form-group">
                            <label for="message">Details</label>
                            <textarea id="message" rows="5" required placeholder="Please describe your request in detail..."></textarea>
                        </div>

                        <!-- Action -->
                        <div class="form-actions">
                            <button type="submit" id="submit-btn" class="submit-button">Submit Request</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Success Message -->
            <div id="success-message" class="success-container hidden">
                <div class="success-icon"><i class="fa-solid fa-check"></i></div>
                <h2>Request Received</h2>
                <p>Thanks for reaching out! Our team has received your ticket and will get back to you shortly.</p>
                <button class="btn btn-outline" onclick="location.reload()">Return to Support</button>
            </div>

        </div>
    </main>

    <footer>
        <p>&copy; 2025 Community Fiber. All rights reserved.</p>
    </footer>

    <!-- Scripts -->
    <script type="module" src="assets/js/support.js"></script>
        <script type="module" src="assets/js/traffic-logger.js"></script> <!-- ADDED TRAFFIC LOGGER -->

</body>
</html>